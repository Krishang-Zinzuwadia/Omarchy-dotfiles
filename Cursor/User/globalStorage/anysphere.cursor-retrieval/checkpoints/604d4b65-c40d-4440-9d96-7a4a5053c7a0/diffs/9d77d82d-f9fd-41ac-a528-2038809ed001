{"fsPath":"/home/krishang/Work/examcooker/ExamCooker-2024/app/@protected_routes/past_papers/page.tsx","fileUuid":"9d77d82d-f9fd-41ac-a528-2038809ed001","fileSizeBytes":9936,"numLines":258,"diffChanges":[{"originalStartLineNumberOneIndexed":54,"originalEndLineNumberExclusiveOneIndexed":55,"modifiedStartLineNumberOneIndexed":54,"modifiedEndLineNumberExclusiveOneIndexed":54},{"originalStartLineNumberOneIndexed":63,"originalEndLineNumberExclusiveOneIndexed":63,"modifiedStartLineNumberOneIndexed":62,"modifiedEndLineNumberExclusiveOneIndexed":155,"addedLines":["    // For development mode - return mock data if no database connection","    if (!process.env.DATABASE_URL) {","        const mockPastPapers = [","            {","                id: '1',","                title: 'Sample Past Paper 1',","                fileUrl: '#',","                thumbNailUrl: null,","                isClear: true,","                createdAt: new Date(),","                updatedAt: new Date(),","                authorId: 'dev-user',","                tags: [","                    { id: '1', name: 'CAT 1', aliases: [], createdAt: new Date(), updatedAt: new Date() },","                    { id: '2', name: 'A1', aliases: [], createdAt: new Date(), updatedAt: new Date() }","                ]","            },","            {","                id: '2',","                title: 'Sample Past Paper 2',","                fileUrl: '#',","                thumbNailUrl: null,","                isClear: true,","                createdAt: new Date(),","                updatedAt: new Date(),","                authorId: 'dev-user',","                tags: [","                    { id: '3', name: 'CAT 2', aliases: [], createdAt: new Date(), updatedAt: new Date() },","                    { id: '4', name: 'B1', aliases: [], createdAt: new Date(), updatedAt: new Date() }","                ]","            }","        ];","","        const filteredPastPapers = mockPastPapers.filter(paper => {","            if (tags.length === 0) return true;","            return tags.some(tag => paper.tags.some(paperTag => paperTag.name === tag));","        });","","        const totalPages = Math.ceil(filteredPastPapers.length / pageSize);","        const paginatedPapers = filteredPastPapers.slice((page - 1) * pageSize, page * pageSize);","        const validatedPage = validatePage(page, totalPages);","","        return (","            <div className=\"p-8 transition-colors flex flex-col min-h-screen items-center text-black dark:text-[#D5D5D5]\">","                <h1 className=\"text-center mb-4\">Past Papers (Development Mode)</h1>","                <div className=\"hidden w-5/6 lg:w-1/2 md:flex items-center justify-center p-4 space-y-4 sm:space-y-0 sm:space-x-4 pt-2\">","                    <Dropdown pageType='past_papers' />","                    <SearchBar pageType=\"past_papers\" initialQuery={search} />","                    <UploadButtonPaper />","                </div>","","                <div className='flex-col w-5/6 md:hidden space-y-4'>","                    <SearchBar pageType=\"past_papers\" initialQuery={search} />","                    <div className='flex justify-between'>","                        <Dropdown pageType='past_papers' />","                        <UploadButtonPaper />","                    </div>","                </div>","","                {tags.length > 0 && (","                    <div className=\"flex justify-center mb-4\">","                        <div className=\"flex flex-wrap gap-2\">","                            {tags.map((tag, index) => (","                                <span key={index} className=\"bg-blue-100 text-blue-800 px-2 py-1 rounded\">","                                    {tag}","                                </span>","                            ))}","                        </div>","                    </div>","                )}","","                <div className=\"flex justify-center\">","                    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 justify-items-center\">","                        {paginatedPapers.map((pastPaper, index) => (","                            <PastPaperCard key={pastPaper.id} pastPaper={pastPaper} index={index} />","                        ))}","                    </div>","                </div>","","                <div className=\"mt-8\">","                    <Pagination ","                        currentPage={validatedPage} ","                        totalPages={totalPages}","                        basePath=\"/past_papers\"","                        searchQuery={search}","                        tagsQuery={tags.join(',')}","                    />","                </div>","            </div>","        );","    }","","    const prisma = new PrismaClient();"],"tokenizedAddedLines":[1000135,1000136,1000137,1000138,1000139,1000140,1000141,1000142,1000143,1000144,1000145,1000146,1000147,1000148,1000149,1000150,1000151,1000138,1000152,1000153,1000141,1000142,1000143,1000144,1000145,1000146,1000147,1000154,1000155,1000150,1000156,1000157,10,1000158,1000159,1000160,1000161,10,1000162,1000163,1000164,10,1000165,1000166,1000167,1000168,96,1000169,97,98,10,1000170,1000169,1000171,1000172,1000173,107,98,10,1000174,1000175,1000176,1000177,1000178,1000179,1000180,1000181,1000182,107,1000183,10,1000184,1000185,1000186,1000187,106,107,98,10,1000188,1000189,1000190,128,129,130,131,132,98,93,1000191,18,10,48]}],"gitInfo":{"gitInfo":{"gitRoot":"/home/krishang/Work/examcooker/ExamCooker-2024","branch":"main","commitHash":"59832f1c77ee1d80d95253d53b140f6c752242f2"}},"kind":"KIND_MODIFIED"}