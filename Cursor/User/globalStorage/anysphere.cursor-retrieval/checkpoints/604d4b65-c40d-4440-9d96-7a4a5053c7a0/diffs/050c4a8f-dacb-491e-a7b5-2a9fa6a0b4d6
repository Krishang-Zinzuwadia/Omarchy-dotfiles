{"fsPath":"/home/krishang/Work/examcooker/ExamCooker-2024/app/@protected_routes/forum/page.tsx","fileUuid":"050c4a8f-dacb-491e-a7b5-2a9fa6a0b4d6","fileSizeBytes":9890,"numLines":307,"diffChanges":[{"originalStartLineNumberOneIndexed":66,"originalEndLineNumberExclusiveOneIndexed":67,"modifiedStartLineNumberOneIndexed":66,"modifiedEndLineNumberExclusiveOneIndexed":66},{"originalStartLineNumberOneIndexed":77,"originalEndLineNumberExclusiveOneIndexed":77,"modifiedStartLineNumberOneIndexed":76,"modifiedEndLineNumberExclusiveOneIndexed":199,"addedLines":["  // For development mode - return mock data if no database connection","  if (!process.env.DATABASE_URL) {","    const mockForumPosts = [","      {","        id: '1',","        title: 'Sample Forum Post 1',","        description: 'This is a sample forum post for development mode.',","        upvoteCount: 5,","        downvoteCount: 1,","        createdAt: new Date(),","        updatedAt: new Date(),","        authorId: 'dev-user',","        forumId: 'dev-forum',","        tags: [","          { id: '1', name: 'CAT 1', aliases: [], createdAt: new Date(), updatedAt: new Date() },","          { id: '2', name: 'A1', aliases: [], createdAt: new Date(), updatedAt: new Date() }","        ],","        author: { id: 'dev-user', name: 'Development User', email: 'dev@example.com' },","        comments: [],","        votes: []","      },","      {","        id: '2',","        title: 'Sample Forum Post 2',","        description: 'Another sample forum post for testing.',","        upvoteCount: 3,","        downvoteCount: 0,","        createdAt: new Date(),","        updatedAt: new Date(),","        authorId: 'dev-user',","        forumId: 'dev-forum',","        tags: [","          { id: '3', name: 'FAT', aliases: [], createdAt: new Date(), updatedAt: new Date() },","          { id: '4', name: 'B2', aliases: [], createdAt: new Date(), updatedAt: new Date() }","        ],","        author: { id: 'dev-user', name: 'Development User', email: 'dev@example.com' },","        comments: [],","        votes: []","      }","    ];","","    const filteredForumPosts = mockForumPosts.filter(post => {","      if (tags.length === 0) return true;","      return tags.some(tag => post.tags.some(postTag => postTag.name === tag));","    });","","    const totalCount = filteredForumPosts.length;","    const totalPages = Math.ceil(totalCount / pageSize);","    const validatedPage = validatePage(page, totalPages);","    const startIndex = (validatedPage - 1) * pageSize;","    const endIndex = startIndex + pageSize;","    const paginatedPosts = filteredForumPosts.slice(startIndex, endIndex);","","    return (","      <div className=\"p-8 transition-colors flex flex-col min-h-screen items-center text-black dark:text-[#D5D5D5]\">","        <h1 className=\"text-center mb-4\">Forum (Development Mode)</h1>","        <div className=\"hidden w-5/6 lg:w-1/2 md:flex items-center justify-center p-4 space-y-4 sm:space-y-0 sm:space-x-4 pt-2\">","          <Dropdown pageType='forum' />","          <SearchBar pageType=\"forum\" initialQuery={search} />","          <NewForumButton />","        </div>","","        <div className='flex-col w-5/6 md:hidden space-y-4'>","          <SearchBar pageType=\"forum\" initialQuery={search} />","          <div className='flex justify-between'>","            <Dropdown pageType='forum' />","            <NewForumButton />","          </div>","        </div>","","        {tags.length > 0 && (","          <div className=\"flex justify-center mb-4\">","            <div className=\"flex flex-wrap gap-2\">","              {tags.map((tag, index) => (","                <span key={index} className=\"bg-blue-100 text-blue-800 px-2 py-1 rounded\">","                  {tag}","                </span>","              ))}","            </div>","          </div>","        )}","","        <div className=\"flex justify-center\">","          <div className=\"grid grid-cols-1 gap-4 justify-items-center\">","            {paginatedPosts.length > 0 ? (","              paginatedPosts.map((post, index) => (","                <ForumCard","                  key={post.id}","                  post={post}","                  title={post.title}","                  desc={post.description}","                  author={post.author?.name || null}","                  createdAt={post.createdAt}","                  tags={post.tags}","                  comments={post.comments}","                />","              ))","            ) : (","              <p className=\"text-center\">","                {search || tags.length > 0","                  ? \"No forum posts found matching your search or selected tags.\"","                  : \"No forum posts found.\"}","              </p>","            )}","          </div>","        </div>","","        {totalPages > 1 && (","          <div className=\"mt-auto\">","            <Pagination","              currentPage={validatedPage}","              totalPages={totalPages}","              basePath=\"/forum\"","              searchQuery={search}","              tagsQuery={tags.join(',')}","            />","          </div>","        )}","      </div>","    );","  }","","  const prisma = new PrismaClient();"],"tokenizedAddedLines":[1000156,1000157,1000158,1000159,1000160,1000161,1000162,1000163,1000164,1000165,1000166,1000167,1000168,1000169,1000170,1000171,1000172,1000173,1000174,1000175,88,1000159,1000176,1000177,1000178,1000179,1000180,1000165,1000166,1000167,1000168,1000169,1000181,1000182,1000172,1000173,1000174,1000175,1000183,1000184,11,1000185,1000186,1000187,1000188,11,1000189,1000190,1000191,1000192,1000193,1000194,11,1000195,1000196,1000197,1000198,118,1000199,119,120,11,1000200,1000199,1000201,1000202,1000203,136,120,11,1000204,1000205,1000206,1000207,1000208,1000209,1000210,1000211,1000212,136,143,11,1000213,1000214,1000215,1000216,1000217,1000218,1000219,1000220,1000221,1000222,1000223,1000224,1000225,1000226,1000227,1000228,1000229,1000230,1000231,1000232,1000233,1000234,136,120,11,1000235,1000236,1000237,1000238,1000239,1000240,1000241,1000242,1000243,136,143,115,1000244,22,11,60]}],"gitInfo":{"gitInfo":{"gitRoot":"/home/krishang/Work/examcooker/ExamCooker-2024","branch":"main","commitHash":"59832f1c77ee1d80d95253d53b140f6c752242f2"}},"kind":"KIND_MODIFIED"}