# Troubleshooting Wayland & Hyprland Screenshots

## The Problem with Window Targeting
On Hyprland (and other Wayland compositors), getting the geometry of a specific window to capture *just* that window is difficult and error-prone.

### Challenges
1.  **Window Identification:** Tools like `hyprctl clients` return JSON data about windows. Filtering by `class` or `title` is unreliable because applications often change these properties (e.g., `gnome-calculator` vs `org.gnome.Calculator`).
2.  **Geometry Calculation:** Even if the window is found, extracting `at` (x, y) and `size` (w, h) to pass to `grim -g "x,y wxh"` often fails if the window is:
    -   Floating vs. Tiled
    -   Partially obscured (Wayland security model often prevents capturing obscured content easily without specific protocols)
    -   On a different workspace
3.  **Focus Issues:** The agent might try to focus the window before capturing, but race conditions can occur where the focus hasn't shifted before the screenshot is taken.

## The Solution: Full Screen Capture
For AI agents that need to "see" the screen to interact with it, **full-screen capture** is significantly more robust.

1.  **Reliability:** `grim` (without arguments) simply captures the current output. It rarely fails if the compositor is running.
2.  **Context:** The agent sees the window in the context of the desktop, which can be helpful for understanding popups or overlays.
3.  **Simplicity:** Removes the complex dependency on parsing `hyprctl` output.

## Dependencies
-   **`grim`**: The standard screenshot utility for Wayland.
-   **`slurp`** (Optional): Used for interactive region selection, usually not needed for automated agents.
